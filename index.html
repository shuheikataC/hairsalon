<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Hair Salon Scheduler – iPad</title>

  <!-- FullCalendar Core & Plugins (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css"
        rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@6.1.8/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.8/locales-all.global.min.js"></script>

  <style>
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;}
    #app{display:flex;height:100vh;min-height:100vh;}
    #external{width:32%;min-width:240px;padding:12px 8px;overflow-y:auto;
             border-right:1px solid #ddd;background:#fafafa;-webkit-user-select:none;user-select:none;}
    #calendar{flex:1 1 auto;min-width:0;}
    h3{margin:0 0 8px;font-size:18px;}
    .customer{margin:6px 0;padding:10px 8px;border:1px solid #bbb;border-radius:6px;
             background:#fff;cursor:grab;-webkit-user-select:none;user-select:none;}
    .customer:active{cursor:grabbing;}
    @media(orientation:portrait){
      #app{flex-direction:column;}
      #external{width:100%;border-right:none;border-bottom:1px solid #ddd;
               display:flex;flex-wrap:wrap;gap:6px;}
      .customer{flex:1 0 46%;}
    }
  </style>
</head>
<body>
<div id="app">
  <div id="external">
    <h3>顧客リスト</h3>
    <div class="customer" data-name="佐藤 明子" data-menu="Cut"   data-duration="60">佐藤 明子 (Cut)</div>
    <div class="customer" data-name="鈴木 太郎" data-menu="Color" data-duration="90">鈴木 太郎 (Color)</div>
    <div class="customer" data-name="田中 陽子" data-menu="Perm"  data-duration="120">田中 陽子 (Perm)</div>
    <div class="customer" data-name="伊藤 浩二" data-menu="Cut"   data-duration="60">伊藤 浩二 (Cut)</div>
    <div class="customer" data-name="山田 花子" data-menu="Color" data-duration="90">山田 花子 (Color)</div>
  </div>

  <div id="calendar"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{

  new FullCalendar.Draggable(
    document.getElementById('external'),
    {
      itemSelector:'.customer',
      longPressDelay:200,       // iPad 用ロングタップ
      eventData:el=>({
        title:el.dataset.name+' ('+el.dataset.menu+')',
        extendedProps:{menu:el.dataset.menu},
        duration:{minutes:Number(el.dataset.duration)}
      })
    }
  );

  const cal=new FullCalendar.Calendar(
    document.getElementById('calendar'),
    {
      locale:'ja',
      schedulerLicenseKey: 'GPL-My-Project-Is-Open-Source',
      initialView:'resourceTimeGridWeek',
      slotMinTime:'09:00:00',
      slotMaxTime:'19:00:00',
      slotDuration:'00:15:00',
      nowIndicator:true,
      editable:true,
      droppable:true,
      resourceAreaHeaderContent:'座席',
      resources:[
        {id:'seat1',title:'Seat&nbsp;1'},
        {id:'seat2',title:'Seat&nbsp;2'}
      ],
      headerToolbar:{left:'prev,next today',center:'title',right:''},
      longPressDelay:200,
      selectLongPressDelay:200,
      eventContent:arg=>{
        const c={Cut:'#4caf50',Color:'#ff9800',Perm:'#2196f3'};
        const bg=c[arg.event.extendedProps.menu]||'#666';
        return{html:`<div style="background:${bg};color:#fff;
                             font-size:13px;padding:2px 4px;border-radius:4px;">
                        ${arg.event.title}</div>`};
      }
    }
  );

  cal.render();
});
</script>
</body>
</html>
